@page "/cart"
@using BlazorElectronics.Shared.Cart
@inherits PageView

<div class="container-sm">
    <PageLoader Page="@this"></PageLoader>
    <h1>Shopping Cart</h1>
    <a href="@Routes.CHECKOUT">Checkout</a>

    @if ( PageIsReady() )
    {
        <div class="d-flex flex-column justify-content-start">
            @if ( _cart.Items.Count <= 0 )
            {
                <span>Cart is empty</span>
            }
            else
            {
                foreach ( CartProductDto p in _cart.Items )
                {
                    <div class="d-flex flex-row flex-grow-1 align-items-center">
                        <img class="cart-item-image" src="@p.Thumbnail" alt="@p.Title"/>
                        <div class="">
                            <h3>@p.Title</h3>
                            @if ( p.SalePrice is not null )
                            {
                                <span class="original-price">@p.Price</span>
                                <span class="sale-price">@p.SalePrice</span>
                            }
                            else
                            {
                                <span class="price">@p.Price</span>
                            }
                            <span>@p.ItemQuantity</span>
                            <input class="form-control" type="number" onchange="@( async ( ChangeEventArgs e ) => await ChangeQuantity( e, p ))"/>
                            <button class="btn btn-danger" onclick="@( async () => await RemoveItem( p ) )">Remove</button>
                        </div>
                    </div>
                }
            }
        </div>
    }
</div>

@page "/registration"
@inherits PageView

<div class="container-sm">
    <PageTitle>Register</PageTitle>
    <h3>UserRegistration</h3>
    
    @if ( !_registered )
    {
        <EditForm Model="_user" OnValidSubmit="@(async () => await HandleRegistration() )">
            <DataAnnotationsValidator/>
            <div class="mb-3">
                <label for="username">Username</label>
                <InputText class="form-control" id="username" @bind-Value="_user.Username"/>
                <ValidationMessage For="@(() => _user.Username)"/>
            </div>
            <div class="mb-3">
                <label for="email">Email</label>
                <InputText class="form-control" id="email" @bind-Value="_user.Email"/>
                <ValidationMessage For="@(() => _user.Email)"/>
            </div>
            <div class="mb-3">
                <label for="password">Password</label>
                <InputText class="form-control" id="password" @bind-Value="_user.Password" type="password"/>
                <ValidationMessage For="@(() => _user.Password)"/>
            </div>
            <div class="mb-3">
                <label for="confirm-password">Confirm Password</label>
                <InputText class="form-control" id="confirm-password" @bind-Value="_user.ConfirmPassword" type="password"/>
                <ValidationMessage For="@(() => _user.ConfirmPassword)"/>
            </div>
            <button class="btn btn-primary" type="submit">Register</button>
        </EditForm>
    }
    else
    {
        <span>You have successfully registered your account. Please check your email for a verification link.</span>
    }
</div>